```
import java.util.Arrays;
public class Q5_ReplaceSpace {

/**
 * @Description: 有str="we are happy",需要替换其中的" "为20%，并要求时间复杂度为O(n)
 * Created by shanzhihong on 2019/07/02-15:13.
 * @version 1.0
 */

    public String replaceSpace(String string){

        char[] str = string.toCharArray();
        int curNum = 0;//空格数目
        for (int i=0;i<str.length;i++){
            if (str[i] == ' '){
                curNum++;
            }
        }
        curNum = curNum * 2;//需要后移的空间
        int p1 = str.length-1;//前指针
        int p2 = str.length-1+curNum;//后指针
        char[] strNew = Arrays.copyOf(str,str.length+curNum);
        while (p1>=0){
            if (strNew[p1] != ' '){
                strNew[p2] = strNew[p1];
                p1--;
                p2--;
            }else {
                //遇到空格,在前指针插入20%并，指针全前进三格
                strNew[p2--] = '%';
                strNew[p2--] = '0';
                strNew[p2--] = '2';
                p1--;
            }
        }
        return String.valueOf(strNew);
    }
    public static void main(String[] args){
        Q5_ReplaceSpace q = new Q5_ReplaceSpace();
        System.out.println(q.replaceSpace("we are happy."));
    }

}
```


